{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "build_example_debug",
            "group": "build",
            "type": "shell",
            "command": "python",
            "args": ["${workspaceFolder}/build.py", "example", "${fileDirname}", "d"],
            "problemMatcher": []

        },
        {
            "label": "build_example_release",
            "group": "build",
            "type": "shell",
            "command": "python",
            "args": ["${workspaceFolder}/build.py", "example", "${fileDirname}", "r"],
            "problemMatcher": []

        },
        {
            "label": "build_pixa",
            "group": "build",
            "type": "shell",
            "command": "python",
            "args": ["${workspaceFolder}/build.py", "pixa"],
            "problemMatcher": []

        },

        {
            "label": "c_clang_debug",
            "group": "build",
            "type": "shell",
            "windows":{
                "command": "clang",
                "args": [
                    "${workspaceFolder}/examples/shapes/main.c",
    
                    // "${workspaceFolder}/src/*.c",
                    
                    "-L${workspaceFolder}/lib/windows",
                    "-lUser32",
                    "-lGdi32",
                    "-lShell32",
                    "-lopengl32",
                    
                    "-lpixa32s",
                    "-lglfw3_mt",
                    "-lglew32s",
    
                    "-Wall",
                    "-Wno-deprecated-declarations",
                    
                    "-g",
                    "-O0",
                    "-DDEBUG",
                    "-I${workspaceFolder}/inc",
                    "-o${workspaceFolder}/out/windows/${workspaceFolderBasename}.exe"
                ],
            },
            "linux":{
                "command": "clang",
                "args": [
                    "${workspaceFolder}/examples/shapes/main.c",

                    // "${workspaceFolder}/src/*.c",
                    
                    "-L${workspaceFolder}/lib/linux",
                    "-lm",
                    "-lGL",
                    "-lpixa",
                    "-lglfw3",
                    "-lGLEW",

                    "-Wall",
                    "-Wno-deprecated-declarations",
                    
                    "-g",
                    "-O0",
                    "-DDEBUG",
                    "-I${workspaceFolder}/inc",
                    "-o${workspaceFolder}/out/linux/${workspaceFolderBasename}"
                ],
            },
            "dependsOn": ["c_clang_lib"],
            "problemMatcher": [],
        },
        {
            "label": "c_clang_release",
            "group": "build",
            "type": "shell",
            "windows":{
                "command": "clang",
                "args": [
                    "${workspaceFolder}/examples/shapes/main.c",
    
                    // "${workspaceFolder}/src/*.c",
                    
                    "-L${workspaceFolder}/lib/windows",
                    "-lUser32",
                    "-lGdi32",
                    "-lShell32",
                    "-lopengl32",
                    
                    "-lpixa32s",
                    "-lglfw3_mt",
                    "-lglew32s",
                    
                    "-Wall",
                    "-Wno-deprecated-declarations",
    
                    "-O2",
                    "-I${workspaceFolder}/inc",
                    "-o${workspaceFolder}/out/windows/${workspaceFolderBasename}.exe"
                ],
            },
            "linux":{
                "command": "clang",
                "args": [
                    "${workspaceFolder}/examples/shapes/main.c",

                    // "${workspaceFolder}/src/*.c",

                    "-L${workspaceFolder}/lib/linux",
                    "-lm",
                    "-lGL",
                    "-lpixa",
                    "-lglfw3",
                    "-lGLEW",

                    "-Wall",
                    "-Wno-deprecated-declarations",
                    
                    "-O2",
                    "-I${workspaceFolder}/inc",
                    "-o${workspaceFolder}/out/linux/${workspaceFolderBasename}"
                ],
            },
            "problemMatcher": [],
            "dependsOn": ["c_clang_lib"]
        },
        {
            "label": "c_clang_lib",
            "group": "build",
            "type": "shell",
            "windows": {
                "command": "clang",
                "args": [
                    "${workspaceFolder}/src/*.c",
                    
                    "-I${workspaceFolder}/inc",
                    "-o${workspaceFolder}/lib/windows/pixa32s.lib",
                    "-fuse-ld=llvm-lib"
                ],
            },
            "linux": {
                "command": "llvm-ar",
                "args": [
                    "-rv",
                    "${workspaceFolder}/lib/linux/libpixa.a",
                    "${workspaceFolder}/out/linux/obj/*.o",
                ],
            },
            "dependsOn": ["c_clang_obj"],
            "problemMatcher": [],
        },
        {
            "label": "c_clang_obj",
            "group": "build",
            "type": "shell",
            "linux": {
                "options": {
                    "cwd": "${workspaceFolder}/out/linux/obj"
                },
                "command": "clang",
                "args": [
                    "-c",
                    "${workspaceFolder}/src/*.c",
                    
                    "-I${workspaceFolder}/inc",
                ],
            },
            "dependsOn": [],
            "problemMatcher": [],
        },
    ]
}